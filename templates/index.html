<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Password Generator + AI</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #0f172a;
    color: #e5e7eb;
    padding: 40px;
}
.container {
    max-width: 500px;
    margin: auto;
    background: #1e293b;
    padding: 25px;
    border-radius: 10px;
}
input, button {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
}
.result, .ai-box {
    background: #020617;
    padding: 10px;
    border-radius: 5px;
    margin-top: 10px;
    word-break: break-all;
}
.history {
    font-size: 0.9em;
    opacity: 0.8;
}
</style>
</head>

<body>
<div class="container">
<h2>üîê Password Generator</h2>

<label>Password Length</label>
<input type="number" id="length" value="12" min="4">

<label>
<input type="checkbox" id="excludeSimilar">
Exclude similar characters
</label>

<button onclick="generatePassword()">Generate</button>

<div class="result" id="passwordBox"></div>
<div id="info"></div>

<button onclick="analyzeAI()">ü§ñ Analyze with AI</button>
<div class="ai-box" id="aiResult"></div>

<h3>History</h3>
<div class="history" id="history"></div>
</div>

<script>
async function generatePassword() {
    const length = document.getElementById("length").value;
    const excludeSimilar = document.getElementById("excludeSimilar").checked;

    const res = await fetch("/generate", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ length, excludeSimilar })
    });

    const data = await res.json();

    document.getElementById("passwordBox").innerText = data.password;
    document.getElementById("info").innerText =
        `Strength: ${data.strength} | Entropy: ${data.entropy} bits`;

    document.getElementById("history").innerHTML =
        data.history.map(p => `‚Ä¢ ${p}`).join("<br>");

    document.getElementById("aiResult").innerText = "";
}

async function analyzeAI() {
    const password = document.getElementById("passwordBox").innerText;
    if (!password) return alert("Generate a password first!");

    document.getElementById("aiResult").innerText = "Analyzing... ü§ñ";

    const res = await fetch("/ai-analyze", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ password })
    });

    const data = await res.json();
    document.getElementById("aiResult").innerText = data.analysis;
}
</script>
</body>
</html>
